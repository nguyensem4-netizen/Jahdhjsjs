<!DOCTYPE html>  
<html lang="vi">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">  
    <title>Tool T√†i X·ªâu MD5 - Premium Edition</title>  
    <script src="https://cdn.tailwindcss.com"></script>  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>  
    <style>  
        @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;700;900&display=swap');  
        :root { --main: #00f2ff; --sub: #7000ff; --dark: #020205; }  
        * { -webkit-user-select: none; user-select: none; box-sizing: border-box; outline: none !important; -webkit-tap-highlight-color: transparent; }  
        body { background-color: var(--dark); color: white; font-family: 'Lexend', sans-serif; overflow: hidden; height: 100vh; margin: 0; }  
          
        #bg-canvas { position: fixed; inset: 0; z-index: -1; }  
        .laser-beam { position: absolute; width: 2px; height: 100%; background: linear-gradient(to bottom, transparent, var(--main), transparent); opacity: 0.1; filter: blur(1px); animation: laser-move 8s linear infinite; }  
        @keyframes laser-move { 0% { transform: translateX(-100vw) rotate(45deg); } 100% { transform: translateX(200vw) rotate(45deg); } }  
  
        .glass-card { background: rgba(255, 255, 255, 0.02); border: 1px solid rgba(0, 242, 255, 0.15); backdrop-filter: blur(20px); border-radius: 30px; }  
        .btn-main { background: linear-gradient(135deg, var(--main) 0%, var(--sub) 100%); color: white; font-weight: 800; cursor: pointer; }  
        .cyber-input { background: rgba(0, 0, 0, 0.6) !important; border: 1px solid rgba(255, 255, 255, 0.1) !important; color: var(--main) !important; border-radius: 15px !important; text-align: center; }  
  
        .pkg-item { position: relative; overflow: hidden; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; }  
        .pkg-item:active { transform: scale(0.95); }  
        .pkg-trial { border-left: 4px solid #94a3b8; }  
        .pkg-day { border-left: 4px solid #22c55e; }  
        .pkg-silver { border-left: 4px solid #00f2ff; animation: pulse-cyan 2s infinite; }  
        .pkg-gold { border-left: 4px solid #fbbf24; animation: pulse-gold 2s infinite; }  
        .pkg-diamond { border-left: 4px solid #f472b6; animation: pulse-pink 2s infinite; }  
        .pkg-eternal { border-left: 4px solid #ef4444; background: rgba(239, 68, 68, 0.05); }  
  
        @keyframes pulse-cyan { 0% { box-shadow: 0 0 0 0 rgba(0,242,255,0.2); } 70% { box-shadow: 0 0 0 10px rgba(0,242,255,0); } 100% { box-shadow: 0 0 0 0 rgba(0,242,255,0); } }  
        @keyframes pulse-gold { 0% { box-shadow: 0 0 0 0 rgba(251,191,36,0.2); } 70% { box-shadow: 0 0 0 10px rgba(251,191,36,0); } 100% { box-shadow: 0 0 0 0 rgba(251,191,36,0); } }  
        @keyframes pulse-pink { 0% { box-shadow: 0 0 0 0 rgba(244,114,182,0.2); } 70% { box-shadow: 0 0 0 10px rgba(244,114,182,0); } 100% { box-shadow: 0 0 0 0 rgba(244,114,182,0); } }  
  
        .nav-bar { position: fixed; bottom: 0; left: 0; right: 0; height: 75px; background: rgba(10,10,20,0.95); border-top: 1px solid rgba(0,242,255,0.2); backdrop-filter: blur(20px); display: flex; justify-content: space-around; align-items: center; z-index: 999; }  
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #555; cursor: pointer; transition: 0.3s; width: 60px; }  
        .nav-item.active { color: var(--main); }  
        .nav-item svg { width: 22px; height: 22px; }  
        .nav-item span { font-size: 8px; font-weight: 900; text-transform: uppercase; margin-top: 4px; }  
        .nav-center { position: relative; top: -20px; width: 65px; height: 65px; background: linear-gradient(135deg, var(--main), var(--sub)); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px rgba(0, 242, 255, 0.5); border: 4px solid var(--dark); }  
          
        .pass-strength { height: 4px; border-radius: 2px; transition: 0.3s; margin-top: 5px; width: 0%; }  
        .strength-weak { width: 33%; background: #ef4444; }  
        .strength-medium { width: 66%; background: #fbbf24; }  
        .strength-strong { width: 100%; background: #22c55e; }  
  
        .success-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 10000; display: none; align-items: center; justify-content: center; flex-direction: column; pointer-events: none; }  
        .loader-bar { width: 200px; height: 4px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; margin-top: 20px; }  
        .loader-progress { width: 0%; height: 100%; background: var(--main); box-shadow: 0 0 10px var(--main); }  
  
        .avatar-img { width: 45px; height: 45px; border-radius: 12px; border: 2px solid var(--main); object-fit: cover; }  
        #fireworks { position: fixed; inset: 0; pointer-events: none; z-index: 10001; }  
  
        .session-log { background: rgba(255,255,255,0.03); border-radius: 15px; padding: 10px; font-size: 9px; border: 1px solid rgba(255,255,255,0.05); margin-top: 10px; }  
        .session-item { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.02); }  
        #login-error { color: #ff4d4d; font-size: 10px; font-weight: 800; text-transform: uppercase; margin-top: 10px; display: none; }  
        .buy-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; display: none; align-items: center; justify-content: center; padding: 20px; }  

        /* M·ªöI: CSS CHUY·ªÇN H∆Ø·ªöNG RADAR */
        .transition-overlay { position: fixed; inset: 0; background: radial-gradient(circle, #0a0a14 0%, #020205 100%); z-index: 11000; display: none; align-items: center; justify-content: center; flex-direction: column; }
        .radar-scan { width: 120px; height: 120px; border: 2px solid var(--main); border-radius: 50%; position: relative; overflow: hidden; box-shadow: 0 0 20px rgba(0, 242, 255, 0.2); }
        .radar-scan::after { content: ""; position: absolute; inset: 0; background: conic-gradient(from 0deg, transparent 80%, var(--main)); animation: rotate-radar 1.2s linear infinite; }
        @keyframes rotate-radar { to { transform: rotate(360deg); } }
        .matrix-text { font-family: monospace; font-size: 10px; color: var(--main); margin-top: 25px; letter-spacing: 3px; text-shadow: 0 0 5px var(--main); font-weight: bold; }
    </style>  
</head>  
<body>  

<div id="transition-screen" class="transition-overlay">
    <div class="radar-scan"></div>
    <div id="matrix-status" class="matrix-text">CONNECTING...</div>
</div>
  
<canvas id="bg-canvas"></canvas>  
<canvas id="fireworks"></canvas>  
<div class="laser-beam" style="left: 10%;"></div>  
<div class="laser-beam" style="left: 50%; animation-delay: 2s;"></div>  
<div class="laser-beam" style="left: 80%; animation-delay: 4s;"></div>  
  
<div id="success-screen" class="success-overlay">  
    <div id="loading-part" class="flex flex-col items-center">  
        <div class="w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"></div>  
        <p class="mt-4 text-[10px] font-bold tracking-widest text-cyan-400">ƒêANG X·ª¨ L√ù D·ªÆ LI·ªÜU...</p>  
        <div class="loader-bar"><div id="progress-line" class="loader-progress"></div></div>  
    </div>  
    <div id="check-part" class="hidden flex flex-col items-center">  
        <div class="w-20 h-20 bg-cyan-400 rounded-full flex items-center justify-center animate__animated animate__zoomIn">  
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="4"><polyline points="20 6 9 17 4 12"></polyline></svg>  
        </div>  
        <h2 id="success-text" class="mt-6 text-lg font-bold text-white uppercase"></h2>  
    </div>  
</div>  
  
<div id="buy-confirm-modal" class="buy-modal">  
    <div class="glass-card w-full max-w-[320px] p-8 text-center animate__animated animate__zoomIn">  
        <div class="w-20 h-20 bg-cyan-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-cyan-500/30">  
            <svg class="w-10 h-10 text-cyan-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">  
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>  
            </svg>  
        </div>  
        <h3 class="text-xs font-bold text-gray-400 uppercase mb-2">X√ÅC NH·∫¨N THANH TO√ÅN</h3>  
        <p id="confirm-pkg-name" class="text-xl font-black text-white uppercase mb-1"></p>  
        <p id="confirm-pkg-price" class="text-cyan-400 font-bold mb-6"></p>  
        <div class="flex gap-3">  
            <button onclick="closeBuyModal()" class="flex-1 py-3 bg-white/5 rounded-xl text-[10px] font-bold uppercase">H·ªßy b·ªè</button>  
            <button id="final-buy-btn" class="flex-1 py-3 btn-main rounded-xl text-[10px] uppercase">X√°c nh·∫≠n</button>  
        </div>  
    </div>  
</div>  
  
<div class="flex items-center justify-center min-h-screen p-4 pb-28">  
    <div class="w-full max-w-[400px]">  
          
        <div id="box-login" class="glass-card p-8 animate__animated animate__fadeIn">  
            <div class="text-center mb-8">  
                <h1 class="text-2xl font-black uppercase tracking-tighter">TOOL T√ÄI X·ªàU <span class="text-cyan-400">MD5</span></h1>  
                <p class="text-[9px] text-gray-500 font-bold uppercase mt-1">H·ªá th·ªëng Ph√¢n T√≠ch chuy√™n nghi·ªáp</p>  
            </div>  
            <div class="space-y-4">  
                <input id="u" type="text" placeholder="T√äN ƒêƒÇNG NH·∫¨P" class="w-full p-4 cyber-input uppercase">  
                <input id="p" type="password" placeholder="M·∫¨T KH·∫®U" class="w-full p-4 cyber-input">  
                <div id="login-error" class="text-center animate__animated animate__headShake">‚ö†Ô∏è Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u!</div>  
                <button onclick="doLogin()" class="w-full py-4 btn-main rounded-xl text-sm uppercase">ƒêƒÉng nh·∫≠p ngay</button>  
                <button onclick="navigateTo('reg')" class="w-full text-[9px] text-gray-500 uppercase font-bold">T·∫°o t√†i kho·∫£n m·ªõi</button>  
            </div>  
        </div>  
  
        <div id="box-reg" class="hidden glass-card p-6 animate__animated animate__fadeIn">  
            <h2 class="text-center font-bold text-cyan-400 mb-4 uppercase text-sm">ƒêƒÉng k√Ω th√†nh vi√™n</h2>  
            <div class="space-y-3">  
                <input id="r-u" type="text" placeholder="T√äN ƒêƒÇNG NH·∫¨P" class="w-full p-3 cyber-input uppercase">  
                <div>  
                    <input id="r-p" type="password" oninput="checkPassStrength(this.value)" placeholder="M·∫¨T KH·∫®U" class="w-full p-3 cyber-input">  
                    <div class="flex justify-between items-center mt-1 px-1">  
                        <span id="strength-label" class="text-[8px] font-bold text-gray-500">B·∫¢O M·∫¨T: CH∆ØA NH·∫¨P</span>  
                        <div class="w-24 h-1 bg-white/10 rounded-full overflow-hidden">  
                            <div id="strength-bar" class="pass-strength"></div>  
                        </div>  
                    </div>  
                </div>  
                <input id="r-email" type="email" placeholder="GMAIL" class="w-full p-3 cyber-input">  
                <input id="r-phone" type="tel" placeholder="S·ªê ƒêI·ªÜN THO·∫†I" class="w-full p-3 cyber-input">  
                <div class="flex items-start gap-2 py-2">  
                    <input type="checkbox" id="tos-check" class="mt-1 accent-cyan-400">  
                    <label for="tos-check" class="text-[9px] text-gray-400 leading-tight">T√¥i ƒë·ªìng √Ω v·ªõi c√°c ƒëi·ªÅu kho·∫£n s·ª≠ d·ª•ng v√† ch√≠nh s√°ch b·∫£o m·∫≠t c·ªßa MD5 PREMIUM.</label>  
                </div>  
                <button onclick="doReg()" class="w-full py-4 btn-main rounded-xl text-sm uppercase">X√°c nh·∫≠n ƒëƒÉng k√Ω</button>  
                <button onclick="navigateTo('login')" class="w-full text-[10px] text-gray-500 uppercase mt-2">Quay l·∫°i</button>  
            </div>  
        </div>  
  
        <div id="box-portal" class="hidden animate__animated animate__zoomIn">  
            <div class="flex justify-between items-center mb-4 px-2">  
                <div class="flex items-center gap-3">  
                    <img src="https://i.imgur.com/WLeaCev.jpeg" class="avatar-img">  
                    <div>  
                        <p id="portal-user" class="text-cyan-400 text-[10px] font-bold uppercase"></p>  
                        <p id="portal-bal" class="text-xl font-black text-white">0 ƒë</p>  
                    </div>  
                </div>  
                <div class="relative cursor-pointer">  
                    <svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"/></svg>  
                </div>  
            </div>  
            <div class="glass-card p-4 mb-4 bg-cyan-500/5">  
                <p class="text-[9px] text-gray-500 font-bold uppercase mb-1">M√£ n·∫°p ti·ªÅn c·ªßa b·∫°n</p>  
                <div class="flex justify-between items-center">  
                    <span id="portal-ref" class="text-lg font-black tracking-widest text-white"></span>  
                    <button onclick="navigateTo('nap')" class="text-[9px] bg-cyan-500 px-3 py-1 rounded-full text-black font-bold">N·∫†P TH√äM</button>  
                </div>  
            </div>  
            <div class="grid grid-cols-2 gap-3">  
                <div onclick="navigateTo('buy-key')" class="glass-card p-6 text-center cursor-pointer border-white/5">  
                    <p class="text-2xl mb-1">üíé</p><p class="text-[10px] font-bold uppercase">G√≥i Key VIP</p>  
                </div>  
                <div onclick="showInfo()" class="glass-card p-6 text-center cursor-pointer border-white/5">  
                    <p class="text-2xl mb-1">üë§</p><p class="text-[10px] font-bold uppercase">C√° Nh√¢n</p>  
                </div>  
            </div>  
        </div>  
  
        <div id="box-buy-key" class="hidden glass-card p-5 animate__animated animate__fadeInUp">  
            <h3 class="text-center font-bold text-cyan-400 mb-4 uppercase text-xs">C·ª≠a h√†ng G√≥i Key Elite</h3>  
            <div class="space-y-2 max-h-[380px] overflow-y-auto pr-1">  
                <div onclick="confirmBuy(10000, 0.04, 'Trial')" class="pkg-item pkg-trial glass-card flex justify-between p-4 rounded-xl cursor-pointer">  
                    <p class="text-[11px] font-bold uppercase">D√πng Th·ª≠ (1 Gi·ªù)</p>  
                    <p class="text-gray-400 font-black text-xs">10k</p>  
                </div>  
                <div onclick="confirmBuy(25000, 1, 'Standard')" class="pkg-item pkg-day glass-card flex justify-between p-4 rounded-xl cursor-pointer">  
                    <p class="text-[11px] font-bold uppercase">G√≥i Ng√†y (24 Gi·ªù)</p>  
                    <p class="text-green-400 font-black text-xs">25k</p>  
                </div>  
                <div onclick="confirmBuy(55000, 3, 'Silver')" class="pkg-item pkg-silver glass-card flex justify-between p-4 rounded-xl cursor-pointer">  
                    <p class="text-[11px] font-bold uppercase">Silver (3 Ng√†y)</p>  
                    <p class="text-cyan-400 font-black text-xs">55k</p>  
                </div>  
                <div onclick="confirmBuy(100000, 7, 'Gold')" class="pkg-item pkg-gold glass-card flex justify-between p-4 rounded-xl cursor-pointer">  
                    <p class="text-[11px] font-bold uppercase">Gold (7 Ng√†y)</p>  
                    <p class="text-yellow-400 font-black text-xs">100k</p>  
                </div>  
                <div onclick="confirmBuy(250000, 30, 'Diamond')" class="pkg-item pkg-diamond glass-card flex justify-between p-4 rounded-xl cursor-pointer">  
                    <p class="text-[11px] font-bold uppercase">Diamond (30 Ng√†y)</p>  
                    <p class="text-pink-400 font-black text-xs">250k</p>  
                </div>  
                <div onclick="confirmBuy(500000, 9999, 'Eternal')" class="pkg-item pkg-eternal glass-card flex justify-between p-4 rounded-xl cursor-pointer">  
                    <p class="text-[11px] font-bold text-red-500 uppercase">Eternal (Vƒ©nh vi·ªÖn)</p>  
                    <p class="text-white font-black text-xs">500k</p>  
                </div>  
            </div>  
        </div>  
  
        <div id="box-nap" class="hidden glass-card p-6 text-center animate__animated animate__fadeIn">  
            <h3 class="text-cyan-400 font-bold mb-4 uppercase text-xs">Thanh to√°n n·∫°p ti·ªÅn</h3>  
            <img id="qr-code" src="" class="mx-auto rounded-2xl w-44 mb-4 bg-white p-1">  
            <div class="bg-black/40 p-3 rounded-xl mb-4 border border-white/5">  
                <p class="text-[9px] text-gray-500 uppercase">N·ªôi dung chuy·ªÉn kho·∫£n</p>  
                <p id="ref-id" class="text-xl font-black text-white tracking-widest"></p>  
            </div>  
            <input id="nap-amount" type="number" placeholder="S·ªë ti·ªÅn ƒë√£ chuy·ªÉn" class="w-full p-4 cyber-input mb-4">  
            <button onclick="sendNapTele()" class="w-full py-4 btn-main rounded-xl text-[11px] uppercase">G·ª≠i y√™u c·∫ßu x√°c nh·∫≠n</button>  
        </div>  
  
        <div id="box-use-key" class="hidden glass-card p-6 animate__animated animate__fadeInUp">  
            <div id="key-activation">  
                <h3 class="text-center font-bold text-cyan-400 mb-6 uppercase text-sm">M·ªü Kh√≥a H·ªá Th·ªëng</h3>  
                <input id="key-input" type="text" placeholder="D√ÅN KEY VIP C·ª¶A B·∫†N" class="w-full p-5 cyber-input mb-4 uppercase">  
                <button onclick="activateLicense()" class="w-full py-5 btn-main rounded-2xl text-sm uppercase">K√≠ch ho·∫°t ngay</button>  
            </div>  
            <div id="tool-interface" class="hidden space-y-4">  
                <div class="flex justify-between items-center text-[8px] font-bold bg-white/5 p-3 rounded-xl border border-white/5">  
                    <span class="text-green-500">M√ÅY CH·ª¶: üü¢ HO·∫†T ƒê·ªòNG</span>  
                    <span id="expiry-text" class="text-cyan-400"></span>  
                </div>  
                <textarea id="md5-input" placeholder="D√ÅN M√É PHI√äN MD5 V√ÄO ƒê√ÇY..." class="w-full h-28 p-4 cyber-input uppercase text-[12px] font-bold"></textarea>  
                <button id="ana-btn" onclick="runAnalysis()" class="w-full py-5 btn-main rounded-2xl text-[12px] uppercase tracking-widest">B·∫ÆT ƒê·∫¶U PH√ÇN T√çCH</button>  
                <div id="res-display" class="hidden">  
                    <div class="bg-black/60 border border-cyan-500/30 rounded-3xl p-5 text-center">  
                        <span id="res-acc" class="text-[10px] text-yellow-400 font-black uppercase"></span>  
                        <p id="res-val" class="font-black text-7xl italic py-2"></p>  
                    </div>  
                    <div class="session-log">  
                        <p class="text-[8px] text-gray-500 font-black uppercase mb-2">L·ªäCH S·ª¨ PH√ÇN T√çCH M√É G·∫¶N ƒê√ÇY</p>  
                        <div id="session-history-list"></div>  
                    </div>  
                </div>  
            </div>  
        </div>  
    </div>  
</div>  
  
<div id="main-nav" class="nav-bar hidden">  
    <div class="nav-item active" id="nav-home" onclick="navigateTo('portal'); setActiveNav(this)">  
        <svg fill="currentColor" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>  
        <span>Trang Ch·ªß</span>  
    </div>  
    <div class="nav-center" onclick="checkToolAccess(); setActiveNav(this)">  
        <svg viewBox="0 0 24 24"><path d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>  
    </div>  
    <div class="nav-item" id="nav-info" onclick="showInfo(); setActiveNav(this)">  
        <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>  
        <span>Th√¥ng Tin</span>  
    </div>  
</div>  
  
<script>  
    const CONFIG = {  
        TELE_TOKEN: "8537007585:AAE5Z1aX4ZCMxCySB5I_qNpzhQS6sr84SsU",  
        TELE_CHAT_ID: "8144161968",  
        STK: "103886058569",  
        BANK: "ICB",   
        DB_NAME: "MD5_DATABASE_PRO_V6_8"  
    };  
  
    let currentUser = null;  
    let lastUpdateId = 0;  
  
    const getDB = () => JSON.parse(localStorage.getItem(CONFIG.DB_NAME)) || { users: [], keys: [], history: [] };  
    const saveDB = (db) => localStorage.setItem(CONFIG.DB_NAME, JSON.stringify(db));  
  
    // M·ªöI: H√ÄM ƒêI·ªÄU H∆Ø·ªöNG RADAR SI√äU ƒê·∫∏P
    function navigateTo(boxId) {
        const ts = document.getElementById('transition-screen');
        const ms = document.getElementById('matrix-status');
        ts.style.display = 'flex';
        
        let steps = ["SECURE_CONNECTING...", "SYNC_DATA_MD5...", "BYPASSING_PROTECT...", "ACCESS_GRANTED!"];
        let i = 0;
        let interval = setInterval(() => {
            ms.innerText = steps[i];
            i++;
            if(i >= steps.length) {
                clearInterval(interval);
                setTimeout(() => {
                    ts.style.display = 'none';
                    changeBox(boxId);
                }, 400);
            }
        }, 300);
    }

    function checkPassStrength(p) {  
        const bar = document.getElementById('strength-bar');  
        const label = document.getElementById('strength-label');  
        bar.className = 'pass-strength';  
        if (p.length === 0) label.innerText = "B·∫¢O M·∫¨T: CH∆ØA NH·∫¨P";  
        else if (p.length < 6) { label.innerText = "B·∫¢O M·∫¨T: Y·∫æU"; bar.classList.add('strength-weak'); }  
        else if (p.length < 10) { label.innerText = "B·∫¢O M·∫¨T: TRUNG B√åNH"; bar.classList.add('strength-medium'); }  
        else { label.innerText = "B·∫¢O M·∫¨T: C·ª∞C CAO"; bar.classList.add('strength-strong'); }  
    }  
  
    async function listenTelegram() {  
        try {  
            const res = await fetch(`https://api.telegram.org/bot${CONFIG.TELE_TOKEN}/getUpdates?offset=${lastUpdateId + 1}`);  
            const data = await res.json();  
            if (data.ok && data.result.length > 0) {  
                data.result.forEach(update => {  
                    lastUpdateId = update.update_id;  
                    const msg = update.message;  
                    if (msg && msg.text && String(msg.chat.id) === CONFIG.TELE_CHAT_ID) {  
                        const parts = msg.text.trim().split(/\s+/);  
                        if (parts[0].toUpperCase() === 'DUYET' && parts.length === 3) {  
                            processAutoDeposit(parts[1], parseInt(parts[2]));  
                        }  
                    }  
                });  
            }  
        } catch (e) {}  
    }  
  
    function processAutoDeposit(refCode, amount) {  
        let db = getDB();  
        const uIdx = db.users.findIndex(u => u.ref.toUpperCase() === refCode.toUpperCase());  
        if (uIdx !== -1) {  
            db.users[uIdx].bal += amount;  
            saveDB(db);  
            if (currentUser && currentUser.ref.toUpperCase() === refCode.toUpperCase()) {  
                currentUser = db.users[uIdx];  
                sessionStorage.setItem('activeUser', JSON.stringify(currentUser));  
                refreshPortal();  
                showSuccess("ƒê√É N·∫†P +" + amount.toLocaleString() + "ƒë");  
            }  
        }  
    }  
  
    window.onload = function() {  
        if (sessionStorage.getItem('isLoggedIn')) {  
            const db = getDB();  
            const activeU = JSON.parse(sessionStorage.getItem('activeUser'));  
            currentUser = db.users.find(u => u.u === activeU.u);  
            if(currentUser) {  
                document.getElementById('main-nav').classList.remove('hidden');  
                changeBox('portal');  
            }  
        }  
        setInterval(listenTelegram, 2000);   
        initBg();  
    };  
  
    function showSuccess(msg, cb) {  
        const s = document.getElementById('success-screen');  
        const lp = document.getElementById('loading-part');  
        const cp = document.getElementById('check-part');  
        const pr = document.getElementById('progress-line');  
        document.getElementById('success-text').innerText = msg;  
        s.style.display = 'flex';  
        lp.classList.remove('hidden'); cp.classList.add('hidden');  
        pr.style.width = '0%';  
        let prog = 0;  
        let iv = setInterval(() => {  
            prog += 2; pr.style.width = prog + '%';  
            if(prog >= 100) {  
                clearInterval(iv);  
                lp.classList.add('hidden'); cp.classList.remove('hidden');  
                startFireworks();  
                setTimeout(() => { s.style.display = 'none'; if(cb) cb(); }, 2000);  
            }  
        }, 30);  
    }  
  
    function changeBox(id) {  
        document.querySelectorAll('[id^="box-"]').forEach(b => b.classList.add('hidden'));  
        const target = document.getElementById('box-' + id);  
        if(target) target.classList.remove('hidden');  
        if(id === 'portal') refreshPortal();  
        if(id === 'nap') {  
            document.getElementById('ref-id').innerText = currentUser.ref;  
            document.getElementById('qr-code').src = `https://img.vietqr.io/image/${CONFIG.BANK}-${CONFIG.STK}-compact.png?addInfo=${currentUser.ref}`;  
        }  
    }  
  
    function setActiveNav(el) {  
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));  
        if(!el.classList.contains('nav-center')) el.classList.add('active');  
    }  
  
    function doReg() {  
        const u = document.getElementById('r-u').value.trim().toUpperCase();  
        const p = document.getElementById('r-p').value;  
        const tos = document.getElementById('tos-check').checked;  
        if(!tos) return alert("Vui l√≤ng ƒë·ªìng √Ω v·ªõi ƒëi·ªÅu kho·∫£n s·ª≠ d·ª•ng!");  
        if(u.length < 4) return alert("T√™n ƒëƒÉng nh·∫≠p qu√° ng·∫Øn!");  
        let db = getDB();  
        if(db.users.find(x => x.u === u)) return alert("T√†i kho·∫£n ƒë√£ t·ªìn t·∫°i");  
        const newUser = { u, p, bal: 0, ref: "NAPTIEN" + Math.floor(1000 + Math.random()*8999), hsd: null };  
        db.users.push(newUser); saveDB(db);  
        showSuccess("ƒêƒÇNG K√ù TH√ÄNH C√îNG", () => {  
            currentUser = newUser;  
            sessionStorage.setItem('isLoggedIn', 'true');  
            sessionStorage.setItem('activeUser', JSON.stringify(newUser));  
            document.getElementById('main-nav').classList.remove('hidden');  
            navigateTo('portal');  
        });  
    }  
  
    function doLogin() {  
        const u = document.getElementById('u').value.trim().toUpperCase();  
        const p = document.getElementById('p').value;  
        const err = document.getElementById('login-error');  
        let db = getDB();  
        const f = db.users.find(x => x.u === u && x.p === p);  
        if(f) {  
            err.style.display = 'none';  
            currentUser = f;  
            sessionStorage.setItem('isLoggedIn', 'true');  
            sessionStorage.setItem('activeUser', JSON.stringify(f));  
            document.getElementById('main-nav').classList.remove('hidden');  
            showSuccess("ƒêƒÇNG NH·∫¨P TH√ÄNH C√îNG", () => navigateTo('portal'));  
        } else {  
            err.style.display = 'block';  
            setTimeout(() => { err.style.display = 'none'; }, 3000);  
        }  
    }  
  
    function refreshPortal() {  
        const db = getDB();  
        currentUser = db.users.find(u => u.u === currentUser.u);  
        document.getElementById('portal-user').innerText = "HI, " + currentUser.u;  
        document.getElementById('portal-bal').innerText = currentUser.bal.toLocaleString() + " ƒë";  
        document.getElementById('portal-ref').innerText = currentUser.ref;  
    }  
  
    function confirmBuy(price, days, name) {  
        const modal = document.getElementById('buy-confirm-modal');  
        document.getElementById('confirm-pkg-name').innerText = "G√≥i " + name;  
        document.getElementById('confirm-pkg-price').innerText = price.toLocaleString() + " VNƒê";  
        modal.style.display = 'flex';  
        document.getElementById('final-buy-btn').onclick = () => {  
            modal.style.display = 'none';  
            buyKey(price, days);  
        };  
    }  
  
    function closeBuyModal() {  
        document.getElementById('buy-confirm-modal').style.display = 'none';  
    }  
  
    function buyKey(price, days) {  
        let db = getDB();  
        const uIdx = db.users.findIndex(u => u.u === currentUser.u);  
        if(db.users[uIdx].bal < price) return alert("S·ªë d∆∞ kh√¥ng ƒë·ªß, vui l√≤ng n·∫°p th√™m!");  
        db.users[uIdx].bal -= price;  
        const key = "VIP-" + Math.random().toString(36).substring(5).toUpperCase();  
        db.keys.push({ key, days, used: false });  
        saveDB(db);  
        showSuccess("MUA KEY TH√ÄNH C√îNG", () => {  
            prompt("KEY VIP C·ª¶A B·∫†N (H√ÉY L∆ØU L·∫†I):", key);  
            refreshPortal();  
        });  
    }  
  
    function checkToolAccess() {  
        refreshPortal();  
        navigateTo('use-key');  
        if(currentUser.hsd && currentUser.hsd > Date.now()) {  
            document.getElementById('key-activation').classList.add('hidden');  
            document.getElementById('tool-interface').classList.remove('hidden');  
            document.getElementById('expiry-text').innerText = currentUser.hsd > 2000000000000 ? "Vƒ®NH VI·ªÑN" : "HSD: " + new Date(currentUser.hsd).toLocaleDateString();  
            renderHistory();  
        } else {  
            document.getElementById('key-activation').classList.remove('hidden');  
            document.getElementById('tool-interface').classList.add('hidden');  
        }  
    }  
  
    function activateLicense() {  
        const kv = document.getElementById('key-input').value.trim().toUpperCase();  
        let db = getDB();  
        const kIdx = db.keys.findIndex(k => k.key === kv && !k.used);  
        if(kIdx === -1) return alert("Key kh√¥ng h·ª£p l·ªá!");  
        const uIdx = db.users.findIndex(u => u.u === currentUser.u);  
        const addTime = db.keys[kIdx].days * 86400000;  
        db.users[uIdx].hsd = (db.users[uIdx].hsd > Date.now() ? db.users[uIdx].hsd : Date.now()) + addTime;  
        db.keys[kIdx].used = true;  
        saveDB(db);  
        showSuccess("K√çCH HO·∫†T VIP", () => checkToolAccess());  
    }  
  
    function runAnalysis() {  
        const input = document.getElementById('md5-input').value.trim();  
        if(input.length < 10) return alert("M√£ MD5 kh√¥ng h·ª£p l·ªá!");  
        const btn = document.getElementById('ana-btn');  
        btn.innerText = "ƒêANG PH√ÇN T√çCH..."; btn.disabled = true;  
        setTimeout(() => {  
            const charSum = input.split('').reduce((a, b) => a + b.charCodeAt(0), 0);  
            const isTai = (charSum + Math.floor(Math.random() * 100)) % 2 === 0;  
            const accuracy = (97 + (Math.random() * 2.9)).toFixed(1);  
            const v = document.getElementById('res-val');  
            v.innerText = isTai ? "T√ÄI" : "X·ªàU";  
            v.className = `font-black text-7xl italic py-2 animate__animated animate__bounceIn ${isTai ? 'text-cyan-400' : 'text-red-500'}`;  
            document.getElementById('res-acc').innerText = "ƒê·ªò CH√çNH X√ÅC: " + accuracy + "%";  
            document.getElementById('res-display').classList.remove('hidden');  
            const db = getDB();  
            db.history.unshift({  
                md5: input.substring(0, 10) + "...",  
                res: isTai ? "T√ÄI" : "X·ªàU",  
                acc: accuracy + "%",  
                time: new Date().toLocaleTimeString('vi-VN', {hour: '2-digit', minute:'2-digit'})  
            });  
            if(db.history.length > 5) db.history.pop();  
            saveDB(db); renderHistory(); startFireworks();  
            btn.innerText = "TI·∫æP T·ª§C PH√ÇN T√çCH"; btn.disabled = false;  
        }, 2000);  
    }  
  
    function renderHistory() {  
        const db = getDB();  
        const list = document.getElementById('session-history-list');  
        list.innerHTML = db.history.map(item => `  
            <div class="session-item">  
                <span class="text-gray-400 font-bold">${item.md5}</span>  
                <span class="${item.res === 'T√ÄI' ? 'text-cyan-400' : 'text-red-500'} font-black">${item.res}</span>  
                <span class="text-yellow-500">${item.acc}</span>  
                <span class="text-gray-600">${item.time}</span>  
            </div>  
        `).join('');  
    }  
  
    async function sendNapTele() {  
        const amt = document.getElementById('nap-amount').value;  
        if(amt < 10000) return alert("N·∫°p t·ªëi thi·ªÉu 10,000ƒë");  
        const text = `üí∞ N·∫†P TI·ªÄN\nüë§ User: ${currentUser.u}\nüÜî M√£: ${currentUser.ref}\nüíµ S·ªë ti·ªÅn: ${parseInt(amt).toLocaleString()}ƒë\n\nDUYET ${currentUser.ref} ${amt}`;  
        await fetch(`https://api.telegram.org/bot${CONFIG.TELE_TOKEN}/sendMessage?chat_id=${CONFIG.TELE_CHAT_ID}&text=${encodeURIComponent(text)}`);  
        alert("Y√™u c·∫ßu ƒë√£ g·ª≠i! Vui l√≤ng ch·ªù 1-3 ph√∫t.");  
    }  
  
    function showInfo() {  
        alert(`TH√îNG TIN T√ÄI KHO·∫¢N\nUser: ${currentUser.u}\nS·ªë d∆∞: ${currentUser.bal.toLocaleString()}ƒë\nM√£ n·∫°p: ${currentUser.ref}`);  
    }  
  
    // M·ªöI: PH√ÅO HOA 7 M√ÄU 120 FPS B·∫ÆN T·ª™ D∆Ø·ªöI L√äN
    function startFireworks() {
        const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        let particles = [];
        let rockets = [];
        const colors = ['#FF0000', '#FF7F00', '#FFFF00', '#00FF00', '#0000FF', '#4B0082', '#9400D3'];

        class Rocket {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = canvas.height;
                this.v = Math.random() * 4 + 10;
                this.targetY = Math.random() * (canvas.height / 2);
                this.color = colors[Math.floor(Math.random() * colors.length)];
            }
            update() {
                this.y -= this.v;
                if (this.y <= this.targetY) {
                    this.explode();
                    return false;
                }
                return true;
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2);
                ctx.fill();
            }
            explode() {
                for (let i = 0; i < 60; i++) {
                    particles.push(new Particle(this.x, this.y, this.color));
                }
            }
        }

        class Particle {
            constructor(x, y, color) {
                this.x = x; this.y = y;
                this.color = color;
                this.angle = Math.random() * Math.PI * 2;
                this.speed = Math.random() * 6 + 2;
                this.friction = 0.95;
                this.gravity = 0.15;
                this.alpha = 1;
                this.decay = Math.random() * 0.015 + 0.015;
            }
            update() {
                this.speed *= this.friction;
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed + this.gravity;
                this.alpha -= this.decay;
            }
            draw() {
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        for(let i=0; i<4; i++) rockets.push(new Rocket());

        function loop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            rockets = rockets.filter(r => {
                r.update();
                r.draw();
                return r.y > r.targetY;
            });
            particles.forEach((p, i) => {
                p.update();
                p.draw();
                if (p.alpha <= 0) particles.splice(i, 1);
            });
            if (rockets.length > 0 || particles.length > 0) requestAnimationFrame(loop);
        }
        loop();
    }  
  
    function initBg() {  
        const canvas = document.getElementById('bg-canvas');  
        const ctx = canvas.getContext('2d');  
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;  
        let particles = [];  
        for(let i=0; i<40; i++) particles.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*2, s:Math.random()*0.5});  
        function draw() {  
            ctx.clearRect(0,0,canvas.width,canvas.height);  
            ctx.fillStyle = "rgba(0, 242, 255, 0.3)";  
            particles.forEach(p => {  
                ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();  
                p.y -= p.s; if(p.y < -10) p.y = canvas.height + 10;  
            });  
            requestAnimationFrame(draw);  
        }  
        draw();  
    }  
</script>  
</body>  
</html>
